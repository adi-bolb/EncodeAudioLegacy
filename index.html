<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>EncodeAudioLegacy by martinsson</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>EncodeAudioLegacy</h1>
        <p>Practice GoldenMaster on legacy with hard to test dependencies</p>

        <p class="view"><a href="https://github.com/martinsson/EncodeAudioLegacy">View the Project on GitHub <small>martinsson/EncodeAudioLegacy</small></a></p>


        <ul>
          <li><a href="https://github.com/martinsson/EncodeAudioLegacy/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/martinsson/EncodeAudioLegacy/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/martinsson/EncodeAudioLegacy">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="instructions" class="anchor" href="#instructions"><span class="octicon octicon-link"></span></a>Instructions</h1>

<p>First use the setup instructions available in the README at the <a href="https://github.com/martinsson/EncodeAudioLegacy">base of the repo</a>
change between steps using changeStep.sh or nextStep.bat</p>

<h2><a name="step-1---string-comparison-using-approvaltests" class="anchor" href="#step-1---string-comparison-using-approvaltests"><span class="octicon octicon-link"></span></a>Step 1 - String comparison using ApprovalTests</h2>
  Goal: Get familiar with ApprovalTests
  <p>Bonus: find a way of covering the FileNotFoundException</p>

  <h3>Acceptance Test</h3>
  <p>You cover almost &gt; 95% of the code</p>

<h2><a name="step-2-coverage-by-input-parameter-variation" class="anchor" href="#step-2-coverage-by-input-parameter-variation"><span class="octicon octicon-link"></span></a>Step 2: Coverage by input parameter variation</h2>
  <p>Goal: cover as many branches as possible in CoreUtil using LegacyApprovals.lockdown()</p>
  <p>There are tests in place, replace all of them with one single test and a test helper method. By varying the inputs you should be able to cover all but one catch clause in CoreUtil.</p>
  <p> FYI, the InvocationTargetException you get from using LegacyApprovals is ApprovalTests way of saying that an exception was thrown by the method called by .lockdown(). You can improve the error message recorded by Approvals, by catching the exception generated by the code and returning e.getMessage() </p> 

  <h3><a name="hints" class="anchor" href="#hints"><span class="octicon octicon-link"></span></a>Hints</h3>
    <p>There are 3 arguments that vary</p>
    <p>there are files in src/test/resources that are used in the tests. You could add more of them, you could misspell a name.</p>

  <h3><a name="acceptance-tests" class="anchor" href="#acceptance-tests"><span class="octicon octicon-link"></span></a>Acceptance tests</h3>
    <ol>
    <li>There is only one test method</li>
    <li>All branches (except IOException in CoreUtil)  are covered</li>
    </ol>

<h2><a name="step-3---serializing-complex-type" class="anchor" href="#step-3---serializing-complex-type"><span class="octicon octicon-link"></span></a>Step 3 - Serializing a complex type</h2>
  Goal: Be able to compare a complex graph of nested objects
  <p>Use 'new XStream().toXml(someObject)' instead of 'someObject.toString()'</p>

  <h3>Acceptance Test</h3>
  <p>No use of IfluxTmlg.toString()</p>

<h2><a name="step-4---mocking-webservice" class="anchor" href="#step-4---mocking-webservice"><span class="octicon octicon-link"></span></a>Step 4 - Mocking a webservice</h2>
  Goal: Setup a webserver, to serve a file
  <p>All tests are failing because the code now tries to download a file from an external webserver. Check the logs for the details of the missing file.
  <p>Configure Moco's 'server' object to respond with one of the source files in src/test/resources</p>

  <h3>Acceptance Test</h3>
  <p>The test passes without exception for atleast some of the combinations of input arguments</p>

</section>
<footer>
  <p>This project is maintained by <a href="https://github.com/martinsson">martinsson</a></p>
  <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
</footer>
</div>
<script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>